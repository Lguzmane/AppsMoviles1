<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/folder/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Registrarse</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="form-title">
    <h2>Únete a PlansApp</h2>
    <p>Regístrate para descubrir y compartir experiencias.</p>
  </div>
  
  <form (ngSubmit)="onSubmit()">
    <ion-item>
      <ion-label position="stacked">Nombre</ion-label>
      <ion-input type="text" [(ngModel)]="registro.nombre" name="nombre" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Apellido</ion-label>
      <ion-input type="text" [(ngModel)]="registro.apellido" name="apellido" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Correo Electrónico</ion-label>
      <ion-input type="email" [(ngModel)]="registro.correo" name="correo" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Contraseña</ion-label>
      <ion-input type="password" [(ngModel)]="registro.password" name="password" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Confirmar Contraseña</ion-label>
      <ion-input type="password" [(ngModel)]="registro.confirmPassword" name="confirmPassword" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">RUT</ion-label>
      <ion-input type="text" [(ngModel)]="registro.rut" name="rut" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Fecha de Nacimiento</ion-label>
      <ion-input type="date" [(ngModel)]="registro.fechaNacimiento" name="fechaNacimiento" required></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Región</ion-label>
      <ion-select [(ngModel)]="registro.region" name="region" (ionChange)="onRegionChange()" required>
        <ion-select-option *ngFor="let region of regiones" [value]="region">{{ region }}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item *ngIf="registro.region === 'Valparaíso'">
      <ion-label position="stacked">Comuna</ion-label>
      <ion-select [(ngModel)]="registro.comuna" name="comuna" required>
        <ion-select-option *ngFor="let comuna of comunasValpo" [value]="comuna">{{ comuna }}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item *ngIf="registro.region !== 'Valparaíso'">
      <ion-label position="stacked">Comuna</ion-label>
      <ion-input type="text" [(ngModel)]="registro.comuna" name="comuna" required></ion-input>
    </ion-item>

    <ion-item>
  <ion-label position="stacked">Teléfono</ion-label>
  <ion-input type="tel" [(ngModel)]="registro.telefono" name="telefono" required></ion-input>
</ion-item>

    <div class="intereses">
      <h4>Intereses</h4>
      <div class="interes-grid">
        <ion-chip *ngFor="let interes of intereses" [color]="interes.color" (click)="toggleInteres(interes)">
          <ion-label>{{ interes.nombre }}</ion-label>
        </ion-chip>
      </div>
    </div>

    <ion-button expand="block" type="submit" color="primary">Registrarse</ion-button>
  </form>
</ion-content>
